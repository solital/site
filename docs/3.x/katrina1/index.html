<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Katrina1 - Solital Framework</title>
  <link rel="shortcut icon" href="../img/favicon.ico">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Mukta:wght@300&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/reset.css">
  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/styles/default.css">
  <link rel="stylesheet" href="../css/styles/atom-one-dark.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

  

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/bootstrap.bundle.min.js"></script>
  <script src="../js/highlight.pack.js"></script>
  <script src="../js/scripts.js"></script>
  <script>hljs.highlightAll();</script>

  
  

  
    <script src="../search/main.js"></script>
  

  

</head>

<body>
  <div class="dashboard">
    <div class="dashboard-nav">
      <header class="mb-4">
        <a href="#!" class="menu-toggle">
          <i class="fas fa-bars"></i>
        </a>

        <a href="#" class="brand-logo">
          <img src="../img/solital-logo-2-sm-trans-2.png" alt="Solital Framework">
        </a>
      </header>

      <nav class="dashboard-nav-list">
        
        
  <a href=".." class="dashboard-nav-item ">
    Starting
  </a>

        
        
<div class="dashboard-nav-dropdown">
  <a href="#!" class="dashboard-nav-item dashboard-nav-dropdown-toggle ">
    Upgrade
  </a>

  <div class="dashboard-nav-dropdown-menu">
    
      <a href="https://github.com/solital/core/releases" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Release Notes
      </a>
    
      <a href="../upgrade-guide/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Upgrade Guide
      </a>
    
  </div>
</div>

        
        
<div class="dashboard-nav-dropdown">
  <a href="#!" class="dashboard-nav-item dashboard-nav-dropdown-toggle ">
    Settings
  </a>

  <div class="dashboard-nav-dropdown-menu">
    
      <a href="../installation/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Installing
      </a>
    
      <a href="../environment-variables/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Environment Variables
      </a>
    
      <a href="../yaml-files/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> YAML Files
      </a>
    
      <a href="../helpers/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Helpers
      </a>
    
  </div>
</div>

        
        
<div class="dashboard-nav-dropdown">
  <a href="#!" class="dashboard-nav-item dashboard-nav-dropdown-toggle ">
    Routers
  </a>

  <div class="dashboard-nav-dropdown-menu">
    
      <a href="../routes/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Routes
      </a>
    
      <a href="../middleware/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Middleware
      </a>
    
      <a href="../url/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> URL
      </a>
    
      <a href="../events/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Events
      </a>
    
      <a href="../input-and-params/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Input and params
      </a>
    
  </div>
</div>

        
        
<div class="dashboard-nav-dropdown">
  <a href="#!" class="dashboard-nav-item dashboard-nav-dropdown-toggle ">
    Components
  </a>

  <div class="dashboard-nav-dropdown-menu">
    
      <a href="../vinci-console/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Vinci Console
      </a>
    
      <a href="../cache/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Cache
      </a>
    
      <a href="../dependency-container/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Dependency Container
      </a>
    
      <a href="../event-loop/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Event Loop
      </a>
    
      <a href="../http-client/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> HTTP Client
      </a>
    
      <a href="../wolf-template/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Wolf Template
      </a>
    
  </div>
</div>

        
        
<div class="dashboard-nav-dropdown">
  <a href="#!" class="dashboard-nav-item dashboard-nav-dropdown-toggle ">
    Resources
  </a>

  <div class="dashboard-nav-dropdown-menu">
    
      <a href="../date-and-time/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Date and time
      </a>
    
      <a href="../file-system/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> File System
      </a>
    
      <a href="../json/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> JSON
      </a>
    
      <a href="../logger/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Logger
      </a>
    
      <a href="../mailer-component/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Mailer
      </a>
    
      <a href="../session-and-cookie/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Session and Cookie
      </a>
    
      <a href="../validation-component/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Validation
      </a>
    
      <a href="../messages/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Messages
      </a>
    
      <a href="../queue/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Queue
      </a>
    
      <a href="../collection/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Collection
      </a>
    
      <a href="../string-manipulate/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Strings
      </a>
    
      <a href="../mask/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Mask
      </a>
    
  </div>
</div>

        
        
<div class="dashboard-nav-dropdown">
  <a href="#!" class="dashboard-nav-item dashboard-nav-dropdown-toggle ">
    Security
  </a>

  <div class="dashboard-nav-dropdown-menu">
    
      <a href="../authenticate/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Authenticate
      </a>
    
      <a href="../cryptography/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Cryptography
      </a>
    
      <a href="../csrf-protection/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> CSRF Protection
      </a>
    
      <a href="../secure-password/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Secure Password
      </a>
    
      <a href="../verify-domain/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Verify Domain
      </a>
    
      <a href="../recovery-password/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Recovery Password
      </a>
    
  </div>
</div>

        
        
<div class="dashboard-nav-dropdown">
  <a href="#!" class="dashboard-nav-item dashboard-nav-dropdown-toggle ">
    Database
  </a>

  <div class="dashboard-nav-dropdown-menu">
    
      <a href="../migrations/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Migrations
      </a>
    
      <a href="../seeders/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Seeders
      </a>
    
      <a href="../dump/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Dump
      </a>
    
      <a href="../katrina-orm/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Katrina ORM
      </a>
    
  </div>
</div>

        
        
  <a href="../deploy/" class="dashboard-nav-item ">
    Deploy
  </a>

        
      </nav>
    </div>

    <div class="dashboard-app">
      <header class="dashboard-toolbar">
        <a href="#!" class="menu-toggle btn-menu"><i class="fas fa-bars"></i></a>
      </header>

      <div class="dashboard-content">
        <div class="container">

          <section class="container-fluid section">
            <div class="row">
              <div class="col-md-12 w-100">
                <h1 class="mt-4 font-weight-normal title-page">Katrina1</h1>
              </div>

              <div class="col-md-12 mt-3">
                

                <ul class="ml-5 mb-5">
                  
                    <li><a href="#getting-started">Getting Started</a></li>
                  
                    <li><a href="#requirements">Requirements</a></li>
                  
                    <li><a href="#installation">Installation</a></li>
                  
                    <li><a href="#settings">Settings</a></li>
                  
                    <li><a href="#for-sqlite">For SQLite</a></li>
                  
                  
                    <li><a href="#initial-structure">Initial structure</a></li>
                  
                  
                    <li><a href="#data-manipulation-crud">Data manipulation - CRUD</a></li>
                  
                    <li><a href="#list">List</a></li>
                  
                    <li><a href="#listing-foreign-key">Listing foreign key</a></li>
                  
                    <li><a href="#custom-select">Custom SELECT</a></li>
                  
                    <li><a href="#insert">Insert</a></li>
                  
                    <li><a href="#update">Update</a></li>
                  
                    <li><a href="#delete">Delete</a></li>
                  
                  
                    <li><a href="#manipulating-tables">Manipulating tables</a></li>
                  
                    <li><a href="#create-a-new-table">Create a new table</a></li>
                  
                    <li><a href="#list-tables">List tables</a></li>
                  
                    <li><a href="#list-columns">List columns</a></li>
                  
                    <li><a href="#alter-table">Alter table</a></li>
                  
                    <li><a href="#adding-foreign-key">Adding foreign key</a></li>
                  
                    <li><a href="#drop-table">Drop table</a></li>
                  
                    <li><a href="#truncate-table">Truncate table</a></li>
                  
                  
                    <li><a href="#procedure">Procedure</a></li>
                  
                  
                    <li><a href="#pagination">Pagination</a></li>
                  
                  
                    <li><a href="#custom-pagination">Custom Pagination</a></li>
                  
                  
                    <li><a href="#types-of-data">Types of data</a></li>
                  
                  
                </ul>

                
                <h2 id="getting-started">Getting Started</h2>
<p>Katrina ORM is a component to bring the object-oriented application development paradigm closer to the relational database paradigm. It helps when carrying out common routines, such as the famous CRUD (create, read, edit and delete), in addition to having a login and data paging system.</p>
<h3 id="requirements">Requirements</h3>
<ul>
<li>PHP &gt;= 7.2 (Compatible with PHP 8)</li>
<li>PHP PDO extension enabled</li>
</ul>
<h3 id="installation">Installation</h3>
<p>Katrina ORM is already installed by default in Solital. But if you are going to install in another project, use the command below to download via Composer.</p>
<pre><code>composer require solital/katrina
</code></pre>
<h3 id="settings">Settings</h3>
<p>In Solital:</p>
<pre><code class="language-bash"># DATABASE CONFIG
DB_DRIVE=&quot;your_drive&quot;
DB_HOST=&quot;your_host&quot;
DB_NAME=&quot;your_database_name&quot;
DB_USER=&quot;your_user&quot;
DB_PASS=&quot;your_password&quot;
</code></pre>
<p>In another project:</p>
<pre><code class="language-php">define('DB_CONFIG', [
    'DRIVE' =&gt; 'your_drive',
    'HOST' =&gt; 'your_host',
    'DBNAME' =&gt; 'your_database_name',
    'USER' =&gt; 'your_user',
    'PASS' =&gt; 'your_password'
]);
</code></pre>
<h3 id="for-sqlite">For SQLite</h3>
<p>Some differences exist for connecting to an SQLite database. First, add an additional index called <code>SQLITE_DIR</code> in the <code>DB_CONFIG</code> constant. This constant must have the absolute path where the SQLite database file will be located.</p>
<p>Then, assign the value <code>sqlite</code> in the index <code>DRIVE</code>.</p>
<pre><code class="language-php">define('DB_CONFIG', [
    'DRIVE' =&gt; 'sqlite',
    'DBNAME' =&gt; 'your_database_name.db',
    'SQLITE_DIR' =&gt; '/path/to/file/'
]);
</code></pre>
<p>In Solital:</p>
<pre><code class="language-bash"># DATABASE CONFIG
DB_DRIVE=&quot;your_drive&quot;
DB_HOST=&quot;your_host&quot;
DB_NAME=&quot;your_database_name&quot;
DB_USER=&quot;your_user&quot;
DB_PASS=&quot;your_password&quot;
SQLITE_DIR=&quot;/path/to/file/&quot;
</code></pre>
<h2 id="initial-structure">Initial structure</h2>
<p>You can use katrina in two ways:</p>
<p>1°) In Solital, extend the model already created and define the variables <code>$table</code>, <code>$primaryKey</code> and <code>$columns</code> in your model's constructor as listed below:</p>
<pre><code class="language-php">&lt;?php

namespace Solital\Components\Model;
use Solital\Components\Model\Model;

class User extends Model
{
    public function __construct()
    {
        $this-&gt;table = 'your_database_table';
        $this-&gt;primaryKey = 'primary_key_of_the_table';
        $this-&gt;columns = [
            'first_column_of_the_table', 
            'second column of the table',
            #...
        ];
    }

    public function get()
    {
        return $this-&gt;instance()-&gt;select()-&gt;build(&quot;ALL&quot;);
    }
}
</code></pre>
<p>2°) Or if you are using it in another project</p>
<pre><code class="language-php">&lt;?php

use Katrina\Katrina as Katrina;

class User
{
    # String
    private $table = 'your_database_table';
    # String
    private $primaryKey = 'primary_key_of_the_table';
    # Array
    private $columns = [
        'first_column_of_the_table', 
        'second column of the table',
        #...
    ];

    public function instance()
    {
        $katrina = new Katrina($this-&gt;table, $this-&gt;columnPrimaryKey, $this-&gt;columns);
        return $katrina;
    }

    public function get()
    {
        return $this-&gt;instance()-&gt;select()-&gt;build(&quot;ALL&quot;);
    }
}
</code></pre>
<h2 id="data-manipulation-crud">Data manipulation - CRUD</h2>
<h3 id="list">List</h3>
<p>To list all fields in the table, use <code>select()</code> as shown in the previous example. By default, the method will list all fields in the table.</p>
<pre><code class="language-php">public function get()
{
    return $this-&gt;instance()-&gt;select()-&gt;build(&quot;ALL&quot;);
}
</code></pre>
<p>To list a single value, pass the table field <code>id</code> as a parameter, and in <code>build()</code> method use <code>ONLY</code>.</p>
<pre><code class="language-php">public function get()
{
    return $this-&gt;instance()-&gt;select(3)-&gt;build(&quot;ONLY&quot;);
}
</code></pre>
<p>To specify which fields you want to list, pass the values ​​as parameters.</p>
<pre><code class="language-php">public function get()
{
    return $this-&gt;instance()-&gt;select(null, null, &quot;name, city, country&quot;)-&gt;build(&quot;ALL&quot;);
}
</code></pre>
<p><strong>WHERE</strong></p>
<p>If you need the <code>WHERE</code> clause, use the second parameter.</p>
<pre><code class="language-php">public function get()
{
    return $this-&gt;instance()-&gt;select(null, 'name=&quot;Clark&quot;', &quot;name, city, country&quot;)
                            -&gt;build(&quot;ALL&quot;);
}
</code></pre>
<p>With primary key:</p>
<pre><code class="language-php">public function get()
{
    return $this-&gt;instance()-&gt;select(3, 'name=&quot;Clark&quot;', &quot;name, city, country&quot;)
                            -&gt;build(&quot;ONLY&quot;);
}
</code></pre>
<p><strong>LIMIT</strong></p>
<pre><code class="language-php">public function get()
{
    return $this-&gt;instance()-&gt;select()-&gt;limit(2, 5)-&gt;build(&quot;ALL&quot;);
}
</code></pre>
<p><strong>LIKE</strong></p>
<p>The <code>LIKE</code> operator must always be used with the <code>WHERE</code>.</p>
<pre><code class="language-php">public function get()
{
    return $this-&gt;instance()-&gt;select(null, &quot;name&quot;)-&gt;like(&quot;%Harvey%&quot;)-&gt;build(&quot;ALL&quot;);
}
</code></pre>
<p><strong>ORDER BY</strong></p>
<pre><code class="language-php">public function get()
{
    return $this-&gt;instance()-&gt;select()-&gt;order(&quot;name&quot;)-&gt;build(&quot;ALL&quot;);
}
</code></pre>
<p>By default, the result will always return ascending. To return values descending, use <code>false</code> in the second parameter.</p>
<pre><code class="language-php">public function get()
{
    return $this-&gt;instance()-&gt;select()-&gt;order(&quot;name&quot;, false)-&gt;build(&quot;ALL&quot;);
}
</code></pre>
<p><strong>BETWEEN</strong></p>
<p>The <code>BETWEEN</code> operator must always be used with the <code>WHERE</code>.</p>
<pre><code class="language-php">public function get()
{
    return $this-&gt;instance()-&gt;select(null, &quot;age&quot;)-&gt;between(18, 25)-&gt;build(&quot;ALL&quot;);
}
</code></pre>
<h3 id="listing-foreign-key">Listing foreign key</h3>
<p>The <code>innerJoin()</code> method returns the values of two tables that have a foreign key.</p>
<p>The first parameter will be the name of the table that has a relationship with the current table. The second will be an array containing in the first index the column name of the current table that has the foreign key, and in the second index the column name of the primary key of the other table. To make it easier, see an example below.</p>
<pre><code class="language-php">public function get()
{
    return $this-&gt;instance()-&gt;innerJoin(&quot;address&quot;, [&quot;idForeignAddress&quot;, &quot;idAddress&quot;])
                            -&gt;build(&quot;ALL&quot;);
}
</code></pre>
<p>If you need to use the <code>WHERE</code> clause, pass the command in the third parameter as shown below.</p>
<pre><code class="language-php">public function get()
{
    return $this-&gt;instance()-&gt;innerJoin(&quot;address&quot;, [&quot;idForeignAddress&quot;, &quot;idAddress&quot;], &quot;order_status=true&quot;)-&gt;build(&quot;ALL&quot;);
}
</code></pre>
<p>You can inform which fields you want to return. "a" is your main table while "b" is your table that has the foreign key.</p>
<pre><code class="language-php">public function get()
{
    return $this-&gt;instance()-&gt;innerJoin(&quot;address&quot;, [&quot;idForeignAddress&quot;, &quot;idAddress&quot;], &quot;order_status=true&quot;, &quot;a.idPerson, a.name, b.street&quot;, &quot;address&quot;, &quot;idAddress&quot;)-&gt;build(&quot;ALL&quot;);
}
</code></pre>
<h3 id="custom-select">Custom SELECT</h3>
<p>You can create a custom SELECT statement. To do this, use the function <code>customQueryOnly</code> to return a single value from the database, and<code>customQueryAll</code> to return all values from the database.</p>
<pre><code class="language-php">public function getAll()
{
    return $this-&gt;instance()-&gt;customQueryAll(&quot;SELECT a.idSession, SUM(b.price) AS price, 
    SUM(a.qtd) AS qtd FROM tb_order a INNER JOIN tb_product b 
    WHERE MONTH( a.created_at) = MONTH(NOW()) GROUP BY a.idSession&quot;);
}
</code></pre>
<pre><code class="language-php">public function getOnly()
{
    return $this-&gt;instance()-&gt;customQueryOnly(&quot;SELECT a.idSession, SUM(b.price) AS price, 
    SUM(a.qtd) AS qtd FROM tb_order a INNER JOIN tb_product b 
    WHERE MONTH( a.created_at) = MONTH(NOW()) GROUP BY a.idSession&quot;);
}
</code></pre>
<h3 id="insert">Insert</h3>
<p>The <code>insert()</code> method inserts the values ​​into the table. It is NOT necessary to use <code>build()</code> method to insert the data. To do this, create an array with the values ​​that the method will receive</p>
<pre><code class="language-php">/**
 * Return bool
 */
public function insert()
{
    $res = $this-&gt;instance()-&gt;insert(['Clark', 'Metropolis', 'EUA']);
    return $res;
}
</code></pre>
<p>To return the last insert ID, pass a <code>true</code> in the second parameter.</p>
<pre><code class="language-php">/**
 * Return array
 * 
 * ['res'] =&gt; 'true',
 * ['lastId'] =&gt; '2'
 */
public function insert()
{
    $res = $this-&gt;instance()-&gt;insert(['Clark', 'Metropolis', 'EUA'], true);
    return $res;
}
</code></pre>
<h3 id="update">Update</h3>
<p>The <code>update()</code> method updates the values ​​in the table. It is NOT necessary to use <code>build()</code> method to update the data. The process is similar to the insert method. The first parameter is the columns that will be updated, the second parameter the values ​​and the third the row <code>id</code>. You can use an integer or a string in the third parameter</p>
<pre><code class="language-php">public function update()
{
    $res = $this-&gt;instance()-&gt;update(['name', 'age'], ['Specter', '41'], &quot;id=3&quot;);
    return $res;
}
</code></pre>
<p>Or</p>
<pre><code class="language-php">public function update()
{
    $res = $this-&gt;instance()-&gt;update(['name', 'age'], ['Specter', '41'], 3);
    return $res;
}
</code></pre>
<h3 id="delete">Delete</h3>
<p>The <code>delete()</code> method deletes the values ​​in the table. Enter the value of the line to be deleted, the value being the primary key.</p>
<pre><code class="language-php">public function delete()
{
    $res = $this-&gt;instance()-&gt;delete(3)-&gt;build();
    return $res;
}
</code></pre>
<p>Or a string</p>
<pre><code class="language-php">public function delete()
{
    $res = $this-&gt;instance()-&gt;delete(&quot;Bruce&quot;)-&gt;build();
    return $res;
}
</code></pre>
<p>By default, the <code>delete</code> method uses the column name of the primary key to delete the row, but you can use the name of another column using the second parameter.</p>
<pre><code class="language-php">public function delete()
{
    $res = $this-&gt;instance()-&gt;delete(&quot;Bruce&quot;, &quot;name&quot;)-&gt;build();
    return $res;
}
</code></pre>
<p>** Force delete with foreign key **</p>
<p>In some cases there may be a need to delete a record with the foreign key from another table. To disable foreign key checking, you can use the third parameter as <code>true</code>.</p>
<pre><code class="language-php">public function delete()
{
    $res = $this-&gt;instance()-&gt;delete(3, null, true)-&gt;build();
    return $res;
}
</code></pre>
<h2 id="manipulating-tables">Manipulating tables</h2>
<h3 id="create-a-new-table">Create a new table</h3>
<p>The <code>createTable()</code> method starts opening the table. After inserting the fields and data types that the tables will have, use <code>closeTable()</code> to close the table. For a better understanding see the syntax below.</p>
<pre><code class="language-php">$res = $this-&gt;instance()
            /* Starts the table by specifying its name */
            -&gt;createTable(&quot;your_table_name&quot;)
            /* Fields and table type */
            -&gt;int(&quot;id_orm&quot;)-&gt;primary()-&gt;increment()
            -&gt;varchar(&quot;name&quot;, 20)-&gt;unique()-&gt;notNull()-&gt;default(&quot;specter&quot;)
            -&gt;int(&quot;age&quot;, 3)-&gt;unsigned()-&gt;notNull()
            -&gt;varchar(&quot;email&quot;, 30)-&gt;default(&quot;harvey.specter@gmail.com&quot;)-&gt;notNull()
            -&gt;varchar(&quot;profession&quot;, 40)
            -&gt;int(&quot;tipo&quot;)
            -&gt;constraint(&quot;dev_cons_fk&quot;)-&gt;foreign(&quot;type&quot;)-&gt;references(&quot;dev&quot;, &quot;iddev&quot;)
            /* Close the command to create the table */
            -&gt;closeTable()
            /* Compile the code above */
            -&gt;build();
</code></pre>
<h3 id="list-tables">List tables</h3>
<p>To have a list of all the tables in your database, use the <code>listTables()</code> method by passing <code>ALL</code> in the <code>build()</code> method.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()-&gt;listTables()-&gt;build(&quot;ALL&quot;);
    return $res;
}
</code></pre>
<h3 id="list-columns">List columns</h3>
<p>To list the columns of a table, use the <code>describeTable()</code> method passing as a parameter the name of your table together with <code>ALL</code> in the <code>build()</code></p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()-&gt;describeTable(&quot;your_table&quot;)-&gt;build(&quot;ALL&quot;);
    return $res;
}
</code></pre>
<h3 id="alter-table">Alter table</h3>
<p>The <code>alter()</code> method performs the procedures of adding, changing and deleting a field from the database table.</p>
<p><strong>Add new field</strong></p>
<p>Use <code>add()</code> method together with the data type to add a new field.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()
                -&gt;alter(&quot;message&quot;)-&gt;add()
                -&gt;varchar(&quot;first_field&quot;, 10)
                -&gt;build();
}
</code></pre>
<p><strong>Drop column</strong></p>
<p>Use the <code>drop()</code> method to delete a column from the table.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()
                -&gt;alter(&quot;message&quot;)-&gt;drop(&quot;type&quot;)
                -&gt;build();
}
</code></pre>
<p><strong>Modify column</strong></p>
<p>Use the modify SQL with the <code>modify()</code> method.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()
                -&gt;alter(&quot;message&quot;)-&gt;modify()
                -&gt;varchar(&quot;person_type&quot;, 100)
                -&gt;build();
}
</code></pre>
<p><strong>Change column</strong></p>
<p>Use the <code>change()</code> method to change a column. As a parameter, pass the current column name.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()
                -&gt;alter(&quot;message&quot;)-&gt;change(&quot;person_type&quot;)
                -&gt;varchar(&quot;type&quot;, 100)
                -&gt;build();
}
</code></pre>
<p><strong>Rename table</strong></p>
<p>Use the <code>rename()</code> method to rename a database table. Use the first parameter the current table name and the second parameter the new table name.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()
                -&gt;rename(&quot;message&quot;, &quot;new_message&quot;)
                -&gt;build();
}
</code></pre>
<h3 id="adding-foreign-key">Adding foreign key</h3>
<p>To add a foreign key to an already created table, use the <code>addConstraint()</code> method to add a constraint; <code>foreign()</code> to inform the column and <code>references()</code> to refer to the table.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()
                -&gt;alter(&quot;message&quot;)-&gt;addConstraint(&quot;dev_cons_fk&quot;)-&gt;foreign(&quot;type&quot;)-&gt;references(&quot;dev&quot;, &quot;iddev&quot;)
                -&gt;build();
}
</code></pre>
<p>NOTE: if you are creating a new table, use the <code>constraint()</code> method instead of <code>addConstraint()</code> as shown below:</p>
<pre><code class="language-php">#...
-&gt;constraint(&quot;dev_cons_fk&quot;)-&gt;foreign(&quot;type&quot;)-&gt;references(&quot;dev&quot;, &quot;iddev&quot;)
#...
</code></pre>
<h3 id="drop-table">Drop table</h3>
<p>To delete a table from the database, use the <code>dropTable()</code> method.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()
                -&gt;dropTable(&quot;message&quot;)
                -&gt;build();
}
</code></pre>
<h3 id="truncate-table">Truncate table</h3>
<p>To use the sql truncate command, use the <code>truncate()</code> method.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()
                -&gt;truncate()
                -&gt;build();
}
</code></pre>
<p>By default, the database checks the table's foreign key and locks the truncate command. To disable foreign key verification, enter <code>true</code> as a parameter.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()
                -&gt;truncate(true)
                -&gt;build();
}
</code></pre>
<h2 id="procedure">Procedure</h2>
<p>To call a database procedure, use the <code>call()</code> method.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()-&gt;call('procedure_name');
    return $res;
}
</code></pre>
<p>To use procedure parameters, pass the values in array format.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()-&gt;call('procedure_name' , ['param_1, param_2, param_3']);
    return $res;
}
</code></pre>
<h2 id="pagination">Pagination</h2>
<p>The <code>pagination()</code> method creates a system for paging results. To initialize, the first parameter must be the table you want to use to start paging. The second parameter will list the amount of values that will be returned from the table as shown in the example below.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()-&gt;pagination('your_table', 3);
    return $res;
}
</code></pre>
<p>The above method will return an array containing <code>rows</code> indexes that will return values, and <code>arrows</code> that will return commands for pagination. </p>
<p>To use pagination with relationship in another table, in the third parameter pass an array containing the name of the table that has a relationship with the current table, the column name of the current table that has the foreign key and the column name of the primary key of the another table.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()-&gt;pagination('your_table', 3, ['foreign_table', 'column_foreign_key', 'column_primary_key']);
    return $res;
}
</code></pre>
<p><strong>INNER JOIN</strong></p>
<p>If you want to use pagination with a table that has a foreign key, pass an array in the third parameter.</p>
<p>In the first index, insert the name of the table that is linked to the current table, in the second index the name of the column that contains the foreign key and in the third index the column name of the primary key of the table that references the current table</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()-&gt;pagination('your_table', 3, ['foreign_table', 'column_foreign_key', 'column_primary_key'], &quot;status=true&quot;);
    return $res;
}
</code></pre>
<p><strong>WHERE clause</strong></p>
<p>To use the WHERE clause, use the fourth parameter as shown below.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()-&gt;pagination('your_table', 3, null, &quot;status=true&quot;);
    return $res;
}
</code></pre>
<p><strong>Wolf Templte</strong></p>
<p>To use in the Wolf template, use it this way.</p>
<pre><code class="language-php">$html = $this-&gt;instance()-&gt;pagination('your_table', 3);

Wolf::loadView('home', [
    'rows' =&gt; $html['rows'],
    'arrows' =&gt; $html['arrows']
]);
</code></pre>
<p>And in your view, return the results that way.</p>
<pre><code class="language-html">&lt;table&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;Name&lt;/th&gt;
            &lt;th&gt;Age&lt;/th&gt;
            &lt;th&gt;Gender&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;

    &lt;tbody&gt;
        &lt;?php foreach ($rows as $r): ?&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;?= $r['name'] ?&gt;&lt;/td&gt;
                &lt;td&gt;&lt;?= $r['age'] ?&gt;&lt;/td&gt;
                &lt;td&gt;&lt;?= $r['gender'] ?&gt;&lt;/td&gt;
            &lt;/tr&gt;
        &lt;?php endforeach; ?&gt;
    &lt;/tbody&gt;
&lt;/table&gt;

&lt;?php
echo $arrows;
</code></pre>
<p>The result will be as follows:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Age</th>
<th>Gender</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sam</td>
<td>47</td>
<td>Male</td>
</tr>
<tr>
<td>Dean</td>
<td>49</td>
<td>Male</td>
</tr>
<tr>
<td>Marry</td>
<td>52</td>
<td>Female</td>
</tr>
</tbody>
</table>
<pre><code class="language-html">&lt;&lt; 1 2 3 &gt;&gt;
</code></pre>
<p>To change the arrows (<code>&lt;&lt;</code> and <code>&gt;&gt;</code>), use the last two parameters of the <code>pagination()</code> method. The result will be:</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()-&gt;pagination('your_table', 3, null, null, &quot;First&quot;, &quot;Last&quot;);
    return $res;
}
</code></pre>
<table>
<thead>
<tr>
<th>Name</th>
<th>Age</th>
<th>Gender</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sam</td>
<td>47</td>
<td>Male</td>
</tr>
<tr>
<td>Dean</td>
<td>49</td>
<td>Male</td>
</tr>
<tr>
<td>Marry</td>
<td>52</td>
<td>Female</td>
</tr>
</tbody>
</table>
<pre><code class="language-html">First 1 2 3 Last
</code></pre>
<h2 id="custom-pagination">Custom Pagination</h2>
<p>If you have a very complex SELECT statement, you can use the <code>customPagination</code> method. This method already has a <code>LIMIT</code> by default, in addition to being able to change the name of the arrows.</p>
<pre><code class="language-php">public function get()
{
    $res = $this-&gt;instance()-&gt;customPagination(&quot;SELECT created_at, order_status, idSession, SUM(idOrder) AS idOrder FROM `tb_order` GROUP BY created_at, order_status, idSession&quot;, 3, &quot;First&quot;, &quot;Last&quot;);

    return $res;
}
</code></pre>
<p><strong>Customizing arrows CSS</strong></p>
<p>You can customize the look of the arrows through the classes <code>pagination_first_item</code>, <code>pagination_atual_item</code>, <code>pagination_others_itens</code> and <code>pagination_last_item</code>.</p>
<p>Below is a customization to serve as an example:</p>
<pre><code class="language-css">.pagination_atual_item {
    background-color: #B5B5B5;
    padding: 10px;
    margin: 5px;
    border-radius: 5px;
    margin-top: 30px;
    transition: 0.2s;
}

.pagination_first_item, .pagination_others_itens, .pagination_last_item {
    background-color: #4682B4;
    color: #FFF;
    padding: 10px;
    margin: 5px;
    border-radius: 5px;
    margin-top: 30px;
    transition: 0.2s;
}

.pagination_first_item:hover, .pagination_others_itens:hover, .pagination_last_item:hover {
    background-color: #0071E3;
    color: #FFF !important;
    transition: 0.2s;
}
</code></pre>
<h2 id="types-of-data">Types of data</h2>
<p>Below is listed the attributes and data supported by Katrina ORM:</p>
<p><strong>String data</strong></p>
<table>
<thead>
<tr>
<th>Types</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>varchar("column_name", size)</code></td>
</tr>
<tr>
<td><code>char("column_name", size)</code></td>
</tr>
<tr>
<td><code>tinytext("column_name", size)</code></td>
</tr>
<tr>
<td><code>mediumtext("column_name", size)</code></td>
</tr>
<tr>
<td><code>longtext("column_name", size)</code></td>
</tr>
<tr>
<td><code>text("column_name")</code></td>
</tr>
</tbody>
</table>
<p><strong>Numerical data</strong></p>
<table>
<thead>
<tr>
<th>Types</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tinyint("column_name", size)</code></td>
</tr>
<tr>
<td><code>smallint("column_name", size)</code></td>
</tr>
<tr>
<td><code>mediumint("column_name", size)</code></td>
</tr>
<tr>
<td><code>bigint("column_name", size)</code></td>
</tr>
<tr>
<td><code>int("column_name", size)</code></td>
</tr>
<tr>
<td><code>decimal("column_name", value1, value2)</code></td>
</tr>
</tbody>
</table>
<p><strong>Date and time</strong></p>
<table>
<thead>
<tr>
<th>Types</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>date("column_name")</code></td>
</tr>
<tr>
<td><code>year("column_name")</code></td>
</tr>
<tr>
<td><code>time("column_name")</code></td>
</tr>
<tr>
<td><code>datetime("column_name")</code></td>
</tr>
<tr>
<td><code>timestamp("column_name")</code></td>
</tr>
</tbody>
</table>
<p><strong>Boolean</strong></p>
<table>
<thead>
<tr>
<th>Types</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>boolean("column_name")</code></td>
</tr>
</tbody>
</table>
<p><strong>Attributes</strong></p>
<table>
<thead>
<tr>
<th>Types</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>default("default_value")</code></td>
</tr>
<tr>
<td><code>unique()</code></td>
</tr>
<tr>
<td><code>unsigned()</code></td>
</tr>
<tr>
<td><code>incremet()</code></td>
</tr>
<tr>
<td><code>notNull()</code></td>
</tr>
<tr>
<td><code>primary()</code></td>
</tr>
<tr>
<td><code>after("column_name")</code></td>
</tr>
<tr>
<td><code>first()</code></td>
</tr>
</tbody>
</table>
                

                <hr />

                

              </div>

              <hr>

              <div class="row text-center mt-3">
                <div class="col-md-12 ml-2">
                  Built with <a href="https://www.mkdocs.org">MkDocs</a>.
                </div>
              </div>
            </div>

            <!--
              MkDocs version      : 1.5.3
              Docs Build Date UTC : 2023-11-10 11:10:40.121286+00:00
              -->

          </section>
        </div>
      </div>
    </div>
  </div>
</body>

</html>