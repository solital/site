<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="robots" content="index, follow">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Katrina ORM - Solital Framework 4.x</title>
  <link rel="shortcut icon" href="../img/favicon.ico">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Mukta:wght@300&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="../css/reset.css">
  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/styles/default.css">
  <link rel="stylesheet" href="../css/styles/atom-one-dark.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

  

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/bootstrap.bundle.min.js"></script>
  <script src="../js/highlight.pack.js"></script>
  <script src="../js/scripts.js"></script>
  <script>hljs.highlightAll();</script>

  
  

  
    <script src="../search/main.js"></script>
  

  

</head>

<body>
  <div class="dashboard">
    <div class="dashboard-nav">
      <header class="mb-4">
        <a href="#!" class="menu-toggle">
          <i class="fas fa-bars"></i>
        </a>

        <a href="https://solital.github.io/site/" class="brand-logo">
          <img src="../img/solital-logo-2-sm-trans-2.png" alt="Solital Framework">
        </a>
      </header>

      <nav class="dashboard-nav-list">
        
        
  <a href=".." class="dashboard-nav-item ">
    Starting
  </a>

        
        
<div class="dashboard-nav-dropdown">
  <a href="#!" class="dashboard-nav-item dashboard-nav-dropdown-toggle ">
    Upgrade
  </a>

  <div class="dashboard-nav-dropdown-menu">
    
      <a href="https://github.com/solital/core/releases" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Release Notes
      </a>
    
      <a href="../upgrade-guide/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Upgrade Guide
      </a>
    
  </div>
</div>

        
        
<div class="dashboard-nav-dropdown">
  <a href="#!" class="dashboard-nav-item dashboard-nav-dropdown-toggle ">
    Settings
  </a>

  <div class="dashboard-nav-dropdown-menu">
    
      <a href="../environment-variables/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Environment Variables
      </a>
    
      <a href="../yaml-files/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> YAML Files
      </a>
    
      <a href="../helpers/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Helpers
      </a>
    
      <a href="../exceptions/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Exceptions
      </a>
    
      <a href="../application-api/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> API Application
      </a>
    
  </div>
</div>

        
        
<div class="dashboard-nav-dropdown">
  <a href="#!" class="dashboard-nav-item dashboard-nav-dropdown-toggle ">
    Routers
  </a>

  <div class="dashboard-nav-dropdown-menu">
    
      <a href="../routes/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Routes
      </a>
    
      <a href="../middleware/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Middleware
      </a>
    
      <a href="../url/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> URL
      </a>
    
      <a href="../events/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Events
      </a>
    
      <a href="../input-and-params/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Input and params
      </a>
    
  </div>
</div>

        
        
<div class="dashboard-nav-dropdown">
  <a href="#!" class="dashboard-nav-item dashboard-nav-dropdown-toggle ">
    Components
  </a>

  <div class="dashboard-nav-dropdown-menu">
    
      <a href="../vinci-console/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Vinci Console
      </a>
    
      <a href="../cache/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Cache
      </a>
    
      <a href="../controller-model/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Controllers and Models
      </a>
    
      <a href="../date-and-time/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Date and time
      </a>
    
      <a href="../dependency-container/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Dependency Container
      </a>
    
      <a href="../event-loop/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Event Loop
      </a>
    
      <a href="../http-client/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> HTTP Client
      </a>
    
      <a href="../mailer-component/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Mailer
      </a>
    
      <a href="../schedule/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Task Schedule
      </a>
    
      <a href="../wolf-template/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Wolf Template
      </a>
    
  </div>
</div>

        
        
<div class="dashboard-nav-dropdown">
  <a href="#!" class="dashboard-nav-item dashboard-nav-dropdown-toggle ">
    Resources
  </a>

  <div class="dashboard-nav-dropdown-menu">
    
      <a href="../browser-storage/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Browser Storage
      </a>
    
      <a href="../collection/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Collection
      </a>
    
      <a href="../file-system/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> File System
      </a>
    
      <a href="../json/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> JSON
      </a>
    
      <a href="../logger/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Logger
      </a>
    
      <a href="../messages/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Messages
      </a>
    
      <a href="../number/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Number
      </a>
    
      <a href="../queue/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Queue
      </a>
    
      <a href="../string-manipulate/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Strings
      </a>
    
      <a href="../session-and-cookie/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Session and Cookie
      </a>
    
      <a href="../validation/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Validation
      </a>
    
      <a href="../mask/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Mask
      </a>
    
  </div>
</div>

        
        
<div class="dashboard-nav-dropdown">
  <a href="#!" class="dashboard-nav-item dashboard-nav-dropdown-toggle ">
    Security
  </a>

  <div class="dashboard-nav-dropdown-menu">
    
      <a href="../authenticate/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Authenticate
      </a>
    
      <a href="../cryptography/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Cryptography
      </a>
    
      <a href="../csrf-protection/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> CSRF Protection
      </a>
    
      <a href="../secure-password/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Secure Password
      </a>
    
      <a href="../verify-domain/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Verify Domain
      </a>
    
      <a href="../recovery-password/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Recovery Password
      </a>
    
      <a href="../scanner/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Malware Scanner
      </a>
    
  </div>
</div>

        
        
<div class="dashboard-nav-dropdown">
  <a href="#!" class="dashboard-nav-item dashboard-nav-dropdown-toggle active ">
    Database
  </a>

  <div class="dashboard-nav-dropdown-menu">
    
      <a href="../migrations/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Migrations
      </a>
    
      <a href="../seeders/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Seeders
      </a>
    
      <a href="../dump/" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Dump
      </a>
    
      <a href="./" class="dashboard-nav-dropdown-item text-black">
        <span class="text-danger" style="margin-right: 10px;">&#10140;</span> Katrina ORM
      </a>
    
  </div>
</div>

        
        
  <a href="../deploy/" class="dashboard-nav-item ">
    Deploy
  </a>

        
      </nav>
    </div>

    <div class="dashboard-app">
      <header class="dashboard-toolbar">
        <a href="#!" class="menu-toggle btn-menu"><i class="fas fa-bars"></i></a>
      </header>

      <div class="dashboard-content">
        <div class="container">

          <section class="container section">
            <div class="row">
              <div class="col-md-12 col-sm-12 w-100">
                <h1 class="mt-4 font-weight-normal title-page">Katrina ORM</h1>
              </div>

              <div class="col-md-12 col-sm-12 mt-3">
                

                <ul class="ml-5 mb-5">
                  
                    <li id="bullet-item">
                      <a href="#version" class="menu-main-item">Version</a>
                    </li>
                  
                  
                    <li id="bullet-item">
                      <a href="#getting-started" class="menu-main-item">Getting Started</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#requirements" class="menu-children-item">Requirements</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#installation" class="menu-children-item">Installation</a>
                    </li>
                  
                  
                    <li id="bullet-item">
                      <a href="#settings" class="menu-main-item">Settings</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#for-sqlite" class="menu-children-item">For SQLite</a>
                    </li>
                  
                  
                    <li id="bullet-item">
                      <a href="#initial-structure" class="menu-main-item">Initial structure</a>
                    </li>
                  
                  
                    <li id="bullet-item">
                      <a href="#changing-default-fields" class="menu-main-item">Changing default fields</a>
                    </li>
                  
                  
                    <li id="bullet-item">
                      <a href="#listing-values-from-a-table" class="menu-main-item">Listing values from a table</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#select-query" class="menu-children-item">SELECT query</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#inner-join-query" class="menu-children-item">INNER JOIN query</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#select-inside-select" class="menu-children-item">SELECT inside SELECT</a>
                    </li>
                  
                  
                    <li id="bullet-item">
                      <a href="#creating-and-updating-data" class="menu-main-item">Creating and updating data</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#insert-query" class="menu-children-item">INSERT query</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#update-query" class="menu-children-item">UPDATE query</a>
                    </li>
                  
                  
                    <li id="bullet-item">
                      <a href="#deleting-data" class="menu-main-item">Deleting data</a>
                    </li>
                  
                  
                    <li id="bullet-item">
                      <a href="#functions" class="menu-main-item">Functions</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#custom-functions" class="menu-children-item">Custom functions</a>
                    </li>
                  
                  
                    <li id="bullet-item">
                      <a href="#manipulating-tables" class="menu-main-item">Manipulating tables</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#create-a-new-table" class="menu-children-item">Create a new table</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#uuids" class="menu-children-item">UUIDs</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#timestamps" class="menu-children-item">Timestamps</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#list-tables" class="menu-children-item">List tables</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#list-columns" class="menu-children-item">List columns</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#drop-table" class="menu-children-item">Drop table</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#alter-table" class="menu-children-item">Alter table</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#adding-foreign-key" class="menu-children-item">Adding foreign key</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#truncate-table" class="menu-children-item">Truncate table</a>
                    </li>
                  
                  
                    <li id="bullet-item">
                      <a href="#procedure" class="menu-main-item">Procedure</a>
                    </li>
                  
                  
                    <li id="bullet-item">
                      <a href="#transactions" class="menu-main-item">Transactions</a>
                    </li>
                  
                  
                    <li id="bullet-item">
                      <a href="#pagination" class="menu-main-item">Pagination</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#pagination-with-other-table-inner-join" class="menu-children-item">Pagination with other table (INNER JOIN)</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#where-clause" class="menu-children-item">WHERE clause</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#wolf-template" class="menu-children-item">Wolf Template</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#custom-pagination" class="menu-children-item">Custom Pagination</a>
                    </li>
                  
                    <li id="bullet-childern-item">
                      <a href="#customizing-arrows-css" class="menu-children-item">Customizing arrows CSS</a>
                    </li>
                  
                  
                    <li id="bullet-item">
                      <a href="#cache" class="menu-main-item">Cache</a>
                    </li>
                  
                  
                    <li id="bullet-item">
                      <a href="#multiple-connections" class="menu-main-item">Multiple connections</a>
                    </li>
                  
                  
                    <li id="bullet-item">
                      <a href="#types-of-data" class="menu-main-item">Types of data</a>
                    </li>
                  
                  
                </ul>

                
                <h2 id="version">Version</h2>
<p>Katrina ORM is currently at version <strong>2.x</strong>. To read documentation for previous versions choose one of the links below.</p>
<p><a href="../katrina-1.0/">1.x</a></p>
<h2 id="getting-started">Getting Started</h2>
<p>Katrina ORM is a component that brings the object-oriented application development paradigm closer to the relational database paradigm. It helps to carry out common routines, such as the famous CRUD (create, read, edit and delete), in addition to having a data paging system.</p>
<p>Katrina ORM uses the Active Record standard to manipulate the data in the database.</p>
<h3 id="requirements">Requirements</h3>
<ul>
<li>PHP &gt;= 8.3</li>
<li>PDO extension enabled</li>
</ul>
<h3 id="installation">Installation</h3>
<p>Katrina ORM is already installed by default in Solital. But if you are going to install in another project, use the command below to download via Composer.</p>
<pre><code>composer require solital/katrina
</code></pre>
<h2 id="settings">Settings</h2>
<p>In Solital:</p>
<pre><code class="language-bash"># DATABASE CONFIG
DB_DRIVE=your_drive
DB_HOST=your_host
DB_NAME=your_database_name
DB_USER=your_user
DB_PASS=your_password
</code></pre>
<p>In another project:</p>
<pre><code class="language-php">define('DB_CONFIG', [
    'DRIVE' =&gt; 'your_drive',
    'HOST' =&gt; 'your_host',
    'DBNAME' =&gt; 'your_database_name',
    'USER' =&gt; 'your_user',
    'PASS' =&gt; 'your_password'
]);
</code></pre>
<h3 id="for-sqlite">For SQLite</h3>
<p>Some differences exist for connecting to an SQLite database. First, add an additional index called <code>SQLITE_DIR</code> in the <code>DB_CONFIG</code> constant. This constant must have the absolute path where the SQLite database file will be located.</p>
<p>Then, assign the value <code>sqlite</code> in the index <code>DRIVE</code>.</p>
<pre><code class="language-php">define('DB_CONFIG', [
    'DRIVE' =&gt; 'sqlite',
    'DBNAME' =&gt; 'your_database_name.db',
    'SQLITE_DIR' =&gt; '/path/to/file/'
]);
</code></pre>
<p>In Solital:</p>
<pre><code class="language-bash"># DATABASE CONFIG
DB_DRIVE=your_drive
DB_HOST=your_host
DB_NAME=your_database_name
DB_USER=your_user
DB_PASS=your_password
SQLITE_DIR=/path/to/file/
</code></pre>
<h2 id="initial-structure">Initial structure</h2>
<p>To initialize the Katrina ORM in your Model, just extend the <code>Katrina</code> class.</p>
<pre><code class="language-php">&lt;?php

namespace Solital\Components\Model;
use Katrina\Katrina;

class User extends Katrina
{
}
</code></pre>
<h2 id="changing-default-fields">Changing default fields</h2>
<p>By default, your class table name is the class name itself, and the primary key name is <code>id</code>.</p>
<p>You can change these settings using the <code>$table</code> and <code>$id</code> properties.</p>
<pre><code class="language-php">&lt;?php

namespace Solital\Components\Model;
use Katrina\Katrina;

class User extends Katrina
{
    /**
     *  @var null|string 
     */
    protected ?string $table = &quot;tb_user&quot;;

    /**
     *  @var null|string 
     */
    protected ?string $id = &quot;id_user&quot;;
}
</code></pre>
<h2 id="listing-values-from-a-table">Listing values from a table</h2>
<h3 id="select-query">SELECT query</h3>
<p>To list all fields in the table, use <code>all()</code> as shown in the previous example.</p>
<pre><code class="language-php">User::all();
</code></pre>
<p><strong>FIND</strong></p>
<p>To list a single value, use <code>find()</code> method;</p>
<pre><code class="language-php">User::find(2);

Users::findFirst(); // Returns the first value in the table
</code></pre>
<p>Or, use the <code>select</code> method:</p>
<pre><code class="language-php">/** 
 * Fetch all
 */
User::select()-&gt;get();

/** 
 * Fetch only
 */
User::select()-&gt;where('id', 2)-&gt;getUnique();

/** 
 * Fetch all with column name
 */
User::select(&quot;name&quot;)-&gt;get();
</code></pre>
<p>If you need to raise an exception if no value is returned, use the <code>findwithException</code> method.</p>
<pre><code class="language-php">User::findwithException(2);
</code></pre>
<p><strong>LATEST</strong></p>
<p>You can return the latest values from the database in descending order using the <code>latest</code> method:</p>
<pre><code class="language-php">User::latest()-&gt;get();
</code></pre>
<p>By default, the <code>latest</code> method will sort using the <code>created_at</code> column. If this column does not exist in your table, you can pass the name of another column as a parameter.</p>
<pre><code class="language-php">User::latest('users')-&gt;get();
</code></pre>
<p><strong>WHERE</strong></p>
<p>The <code>WHERE</code> clause is used to filter records.</p>
<p>It is used to extract only those records that fulfill a specified condition.</p>
<pre><code class="language-php">/** 
 * Katrina will look for a record that has `foo` in the table.
*/
User::select()-&gt;where(&quot;name&quot;, &quot;foo&quot;)-&gt;get();

/** 
 * Katrina will look for a record whose age is greater than 10.
*/
User::select()-&gt;where(&quot;age&quot;, 10, &quot;&gt;&quot;)-&gt;get();

/** 
 * Katrina will look for a record that is under the age of 10.
*/
User::select()-&gt;where(&quot;age&quot;, 10, &quot;&lt;&quot;)-&gt;get();
</code></pre>
<p>To save time and avoid using the <code>and</code> method, you can pass an array as a parameter in the <code>where</code> method with multiple conditions.</p>
<pre><code class="language-php">User::select()-&gt;where([
  'name', 'foo',
  'age', 10
])-&gt;get();
</code></pre>
<p><strong>AND</strong></p>
<p>The <code>AND</code> operator displays a record if all the conditions separated by <code>AND</code> are <code>TRUE</code>.</p>
<pre><code class="language-php">User::select()-&gt;where(&quot;brand&quot;, 'visa')-&gt;and(&quot;cvv&quot;, '502')-&gt;get();
</code></pre>
<p><strong>OR</strong></p>
<p>The <code>OR</code> operator displays a record if any of the conditions separated by <code>OR</code> is <code>TRUE</code>.</p>
<pre><code class="language-php">User::select()-&gt;where(&quot;brand&quot;, 'visa')-&gt;or(&quot;cvv&quot;, '502')-&gt;get();
</code></pre>
<p><strong>LIKE</strong></p>
<p>Used in a <code>WHERE</code> clause to search for a specified pattern in a column.</p>
<pre><code class="language-php">User::select()-&gt;where(&quot;name&quot;)-&gt;like(&quot;%foo%&quot;)-&gt;get();
</code></pre>
<p><strong>BETWEEN</strong></p>
<p>Selects values within a given range. The values can be numbers, text, or dates.</p>
<pre><code class="language-php">User::select()-&gt;where(&quot;age&quot;)-&gt;between(10, 22)-&gt;get();
</code></pre>
<p><strong>LIMIT</strong></p>
<p>Used to specify the number of records to return.</p>
<pre><code class="language-php">User::select()-&gt;limit(0, 3)-&gt;get();
</code></pre>
<p><strong>ORDER BY</strong></p>
<p>Used to sort the result-set in ascending or descending order.</p>
<pre><code class="language-php">User::select()-&gt;order(&quot;name&quot;)-&gt;get();
</code></pre>
<p>By default, the result will always return ascending. To return values descending, use <code>false</code> in the second parameter.</p>
<pre><code class="language-php">User::select()-&gt;order(&quot;name&quot;, false)-&gt;get();
</code></pre>
<p><strong>GROUP BY</strong></p>
<p>The <code>GROUP BY</code> statement groups rows that have the same values into summary rows, like "find the number of customers in each country".</p>
<p>The <code>group by</code> SQL command requires the use of a function. Use the <code>group()</code> method together with the <code>Functions</code> class (see <a href="#functions">here</a>).</p>
<pre><code class="language-php">User::select(&quot;name, &quot; . Functions::count('*', 'qtd'))-&gt;group(&quot;name&quot;)-&gt;get();
</code></pre>
<p><strong>COUNT</strong></p>
<p>The <code>count</code> method returns the total number of values in a table.</p>
<pre><code class="language-php">User::count();
</code></pre>
<p>If you want to specify the name of a column, use the first parameter. And to use the WHERE clause, use the second parameter.</p>
<pre><code class="language-php">// `Email` column
User::count(&quot;email&quot;);

// `Email` column with WHERE clause
User::count(&quot;email&quot;, &quot;email='solital@gmail.com'&quot;);
</code></pre>
<h3 id="inner-join-query">INNER JOIN query</h3>
<p>The <code>innerJoin()</code> method returns the values of two tables that have a foreign key.</p>
<p>The first parameter represents the table containing the foreign key. The second parameter represents the <code>id</code> of the foreign key.</p>
<pre><code class="language-php">User::select()
    -&gt;innerJoin(&quot;table1&quot;, &quot;id1&quot;)
    -&gt;innerJoin(&quot;table2&quot;, &quot;id2&quot;)
    -&gt;get();
</code></pre>
<p>If you need to use the <code>WHERE</code> clause, use the <code>where()</code> method.</p>
<pre><code class="language-php">User::select()
    -&gt;innerJoin(&quot;table1&quot;, &quot;id1&quot;)
    -&gt;innerJoin(&quot;table2&quot;, &quot;id2&quot;)
    -&gt;where(&quot;phone&quot;, 123123123)
    -&gt;get();
</code></pre>
<p>NOTE: If you have two or more tables where the column names are the same, remember to specify the table names in the <code>where()</code> method:</p>
<pre><code class="language-php">User::select()
    -&gt;innerJoin(&quot;table1&quot;, &quot;id1&quot;)
    -&gt;innerJoin(&quot;table2&quot;, &quot;id2&quot;)
    -&gt;where(&quot;table1.phone&quot;, 123123123)
    -&gt;get();
</code></pre>
<h3 id="select-inside-select">SELECT inside SELECT</h3>
<p>Some SQL queries need to have multiple SELECTs, and sometimes those SELECTs are inside other SELECTs. If you need such a query, follow the example:</p>
<pre><code class="language-php">$sql = User::select(&quot;name&quot;)-&gt;where(&quot;name&quot;, &quot;solital&quot;)-&gt;rawQuery();
$result = User::select(&quot;name, age&quot;)-&gt;where(&quot;name&quot;, Functions::subquery($sql))-&gt;get();

var_dump($result);
</code></pre>
<p>The <code>rawQuery()</code> function will return an SQL string (you can use a <code>var_dump()</code> to parse the returned string). Then, to use that SQL string inside another query, use the <code>subquery()</code> function.</p>
<h2 id="creating-and-updating-data">Creating and updating data</h2>
<h3 id="insert-query">INSERT query</h3>
<p>Katrina uses the ActiveRecord standard to insert and update database data. However, if you don't want to use the ActiveRecord pattern, you can use the <code>insert()</code> and <code>update()</code> methods.</p>
<p><strong>With ActiveRecord</strong></p>
<p>To insert data in the table, you must use the column name as a value. If your table has <code>name</code>, <code>age</code> and <code>email</code> columns, then the values should be used following that same sequence.</p>
<p>Note the code below:</p>
<pre><code class="language-php">$user = new User();
$user-&gt;name = &quot;Harvey Specter&quot;;
$user-&gt;age = 40;
$user-&gt;email = &quot;harvey@pearsonspecterlitt.com&quot;;
$user-&gt;save();
</code></pre>
<p><strong>With the <code>insert</code> method</strong></p>
<p>To save data, you must pass an array in which the keys will be the columns of the table. The values of these keys will be inserted into the database.</p>
<pre><code class="language-php">User::insert([
    'name' =&gt; 'Harvey Specter',
    'age' =&gt; 40,
    'email' =&gt; 'harvey@pearsonspecterlitt.com'
]);
</code></pre>
<p>If you want to retrieve the last ID entered, use the <code>lastId()</code> method.</p>
<pre><code class="language-php">$res = User::insert([
    'name' =&gt; 'Harvey Specter',
    'age' =&gt; 40,
    'email' =&gt; 'harvey@pearsonspecterlitt.com'
])-&gt;lastId();

var_dump($res);
</code></pre>
<h3 id="update-query">UPDATE query</h3>
<p><strong>With ActiveRecord</strong></p>
<p>The process for updating a record in the table is very similar to inserting a record. However, you need to specify the <code>id</code> of your table:</p>
<pre><code class="language-php">$user = new User();
$user-&gt;id = 1;
$user-&gt;name = &quot;Harvey Specter&quot;;
$user-&gt;age = 42;
$user-&gt;email = &quot;harvey@specterlitt.com&quot;;
$user-&gt;save();
</code></pre>
<p><strong>With the <code>update</code> method</strong></p>
<p>The process for updating a value in the database using the <code>update</code> method is similar to using the <code>insert</code> method. The difference is that you will use the <code>where</code> method to define the values that will be updated. And to save those changes, the <code>saveUpdate</code> method must be present.</p>
<pre><code class="language-php">User::update([
    'name' =&gt; 'Harvey Specter',
    'age' =&gt; 42,
    'email' =&gt; 'harvey@specterlitt.com'
])-&gt;where('id', 1)-&gt;saveUpdate();
</code></pre>
<h2 id="deleting-data">Deleting data</h2>
<p>To delete a record from the table, use the <code>delete()</code> method.</p>
<pre><code class="language-php">User::delete('id', 2);
</code></pre>
<p>If you want to delete a row that has a foreign key in another table, the <code>$safe_mode</code> parameter must be changed to <code>false</code>:</p>
<pre><code class="language-php">User::delete('id', 2, false);
</code></pre>
<h2 id="functions">Functions</h2>
<p>Katrina 2 supports SQL functions. You can use a function in an SQL query using the <code>Function</code> Method:</p>
<pre><code class="language-php">use Katrina\Functions\Functions;

User::select(&quot;name, &quot; . Functions::count('*', 'qtd'))-&gt;group(&quot;name&quot;)-&gt;get();
</code></pre>
<p>When using a function, you can rename the table name when viewing the data using the <code>$as</code> parameter.</p>
<pre><code class="language-php">Functions::count(as: 'qtd');
Functions::concat(as: 'result');
Functions::trim(as: 'string');

//...
</code></pre>
<p>Below is a list of all the functions present in Katrina ORM:</p>
<table class="table">
  <thead>
    <tr>
      <th scope="col">Aggregate Functions</th>
      <th scope="col">Date Functions</th>
      <th scope="col">Math Functions</th>
      <th scope="col">String Functions</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><span class="cmd-vinci">avg()</span></td>
      <td><span class="cmd-vinci">now()</span></td>
      <td><span class="cmd-vinci">abs()</span></td>
      <td><span class="cmd-vinci">concat()</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">count()</span></td>
      <td><span class="cmd-vinci">curdate()</span></td>
      <td><span class="cmd-vinci">round()</span></td>
      <td><span class="cmd-vinci">ltrim()</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">max()</span></td>
      <td><span class="cmd-vinci">date()</span></td>
      <td><span class="cmd-vinci">truncate()</span></td>
      <td><span class="cmd-vinci">rtrim()</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">min()</span></td>
      <td><span class="cmd-vinci">hour()</span></td>
      <td><span class="cmd-vinci">-</span></td>
      <td><span class="cmd-vinci">trim()</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">sum()</span></td>
      <td><span class="cmd-vinci">day()</span></td>
      <td><span class="cmd-vinci">-</span></td>
      <td><span class="cmd-vinci">-</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">groupConcat()</span></td>
      <td><span class="cmd-vinci">month()</span></td>
      <td><span class="cmd-vinci">-</span></td>
      <td><span class="cmd-vinci">-</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">-</span></td>
      <td><span class="cmd-vinci">year()</span></td>
      <td><span class="cmd-vinci">-</span></td>
      <td><span class="cmd-vinci">-</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">-</span></td>
      <td><span class="cmd-vinci">datediff()</span></td>
      <td><span class="cmd-vinci">-</span></td>
      <td><span class="cmd-vinci">-</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">-</span></td>
      <td><span class="cmd-vinci">currentTimestamp()</span></td>
      <td><span class="cmd-vinci">-</span></td>
      <td><span class="cmd-vinci">-</span></td>
    </tr>
  </tbody>
</table>

<h3 id="custom-functions">Custom functions</h3>
<p>If the function you want does not exist or has not yet been implemented in the Katrina ORM, you can use the <code>custom()</code> method.</p>
<p>In the first parameter, you must enter the name of the SQL function. In the second parameter, the value of this function. And in the third parameter, you can rename the table when returning the data.</p>
<pre><code class="language-php">Functions::custom('sum', '*', 'result');
</code></pre>
<h2 id="manipulating-tables">Manipulating tables</h2>
<h3 id="create-a-new-table">Create a new table</h3>
<p>The <code>createTable()</code> method starts opening the table. After inserting the fields and data types that the tables will have, use <code>closeTable()</code> to close the table. For a better understanding see the syntax below.</p>
<pre><code class="language-php">User::createTable(&quot;your_table_name&quot;)
    /* Fields and table type */
    -&gt;int(&quot;id_user&quot;)-&gt;primary()-&gt;increment()
    -&gt;varchar(&quot;name&quot;, 20)-&gt;unique()-&gt;notNull()-&gt;default(&quot;specter&quot;)
    -&gt;int(&quot;age&quot;, 3)-&gt;unsigned()-&gt;notNull()
    -&gt;varchar(&quot;email&quot;, 30)-&gt;default(&quot;harvey.specter@gmail.com&quot;)-&gt;notNull()
    -&gt;varchar(&quot;profession&quot;, 40)
    -&gt;constraint(&quot;dev_cons_fk&quot;)-&gt;foreign(&quot;type&quot;)-&gt;references(&quot;dev&quot;, &quot;iddev&quot;)
    -&gt;createdUpdatedAt()
    /* Close the command to create the table */
    -&gt;closeTable();
</code></pre>
<p><strong>For POSTGRESQL</strong></p>
<p>Postgresql doesn't natively support the <code>AUTO_INCREMENT</code> command. An alternative is to use the <code>SERIAL</code> command. So, if you are going to create a table using Postgresql as a database, use the <code>serial()</code> method.</p>
<pre><code class="language-php">User::createTable(&quot;your_table_name&quot;)
    -&gt;serial('id_user')-&gt;primary()
    # ...
</code></pre>
<h3 id="uuids">UUIDs</h3>
<p>On certain occasions it is necessary to generate a unique identifier for each record. These identifiers are called UUID (universally unique identifiers).</p>
<p>To create a field in a table that will receive a UUID, use the <code>uuid()</code> method. This method will generate a field of binary type.</p>
<pre><code class="language-php">User::createTable(&quot;your_table_name&quot;)
    -&gt;uuid('id')-&gt;primary()
    # ...
</code></pre>
<p>When creating a field in the table that will receive a UUID and be defined as the primary key, you must enable increment in the class.</p>
<pre><code class="language-php">&lt;?php

namespace Solital\Components\Model;
use Katrina\Katrina;

class User extends Katrina
{
    protected ?bool $uuid_increment = true;
}
</code></pre>
<p>If you use the <code>insert()</code> method instead of the standard Active Record to save the data in the table, you must pass the UUID manually. To do this, use the <code>uuidToBin()</code> method.</p>
<pre><code class="language-php">use Katrina\Functions\Functions;

User::insert([
    'id' =&gt; Functions::uuidToBin(),
    'name' =&gt; 'Harvey Specter',
    'age' =&gt; 40,
    'email' =&gt; 'harvey@pearsonspecterlitt.com'
]);
</code></pre>
<p>When using the <code>uuidToBin</code> method, the UUID is converted to binary. When returning data and converting back to UUID, use the <code>binToUuid()</code> method.</p>
<pre><code class="language-php">foreach(Users::all() as $user) {
    echo Functions::binToUuid($user-&gt;id) . PHP_EOL;
}
</code></pre>
<p>Remember that Katrina ORM uses <a href="https://datatracker.ietf.org/doc/html/draft-ietf-uuidrev-rfc4122bis#name-uuid-version-4">UUID in version 4</a>.</p>
<h3 id="timestamps">Timestamps</h3>
<p>If you want to change the name of the <code>created_at</code> and <code>updated_at</code> columns, use the properties below:</p>
<pre><code class="language-php">&lt;?php

namespace Solital\Components\Model;
use Katrina\Katrina;

class User extends Katrina
{
    protected string $created_at = 'created_date';
    protected string $updated_at = 'updated_date';
}
</code></pre>
<p>You can also rename columns when creating a table in the database using the <code>createdUpdatedAt</code> method.</p>
<pre><code class="language-php">// ...
-&gt;createdUpdatedAt('created_date', 'updated_date')
// ...
</code></pre>
<h3 id="list-tables">List tables</h3>
<p>To have a list of all the tables in your database, use the <code>listTables()</code> method.</p>
<pre><code class="language-php">User::listTables();
</code></pre>
<h3 id="list-columns">List columns</h3>
<p>To list the columns of a table, use the <code>describeTable()</code> method.</p>
<pre><code class="language-php">User::describeTable();
</code></pre>
<h3 id="drop-table">Drop table</h3>
<p>If it is necessary to drop the table, use the <code>dropTable()</code> method.</p>
<pre><code class="language-php">User::dropTable();
</code></pre>
<h3 id="alter-table">Alter table</h3>
<p>The <code>alter()</code> method performs the procedures of adding, changing and deleting a field from the database table.</p>
<p><strong>Add new field</strong></p>
<p>Use <code>add()</code> method together with the data type to add a new field.</p>
<pre><code class="language-php">User::alter()-&gt;varchar(&quot;username&quot;, 20)-&gt;add();
</code></pre>
<p><strong>Drop column</strong></p>
<p>Use the <code>drop()</code> method to delete a column from the table.</p>
<pre><code class="language-php">User::alter()-&gt;drop(&quot;username&quot;);
</code></pre>
<p><strong>Modify column</strong></p>
<p>Use the modify SQL with the <code>modify()</code> method.</p>
<pre><code class="language-php">User::alter()-&gt;varchar(&quot;name&quot;, 100)-&gt;modify();
</code></pre>
<p><strong>Rename table</strong></p>
<p>Use the <code>rename()</code> method to rename a database table.</p>
<pre><code class="language-php">User::alter()-&gt;rename(&quot;new_table_name&quot;);
</code></pre>
<h3 id="adding-foreign-key">Adding foreign key</h3>
<p>To add a foreign key to an already created table, use the <code>constraint()</code> method to add a constraint; <code>foreign()</code> to inform the column and <code>references()</code> to refer to the table.</p>
<pre><code class="language-php">User::alter()-&gt;constraint(&quot;dev_cons_fk&quot;)-&gt;foreign(&quot;type&quot;)-&gt;references(&quot;dev&quot;, &quot;iddev&quot;);
</code></pre>
<h3 id="truncate-table">Truncate table</h3>
<p>To use the sql truncate command, use the <code>truncate()</code> method.</p>
<pre><code class="language-php">User::truncate();
</code></pre>
<p>By default, the database checks the table's foreign key and locks the truncate command. To disable foreign key verification, enter <code>true</code> as a parameter.</p>
<pre><code class="language-php">User::truncate(true);
</code></pre>
<h2 id="procedure">Procedure</h2>
<p>To call a database procedure, use the <code>call()</code> method.</p>
<pre><code class="language-php">User::call('procedure_name');
</code></pre>
<p>To use procedure parameters, pass the values in array format.</p>
<pre><code class="language-php">User::call('procedure_name' , ['param_1, param_2, param_3']);
</code></pre>
<h2 id="transactions">Transactions</h2>
<p>Transactions are typically implemented by "saving-up" your batch of changes to be applied all at once; this has the nice side effect of drastically improving the efficiency of those updates. In other words, transactions can make your scripts faster and potentially more robust (you still need to use them correctly to reap that benefit).</p>
<pre><code class="language-php">public static function transaction()
{
  try {
    $pdo = Connection::getInstance();
    $pdo-&gt;beginTransaction();

    // code...

    $pdo-&gt;commit();
  } catch (\PDOException $e) {
    $pdo-&gt;rollback();
    echo $e-&gt;getMessage();
  }
}

// Using transactions

User::transaction();
</code></pre>
<h2 id="pagination">Pagination</h2>
<p>The <code>pagination()</code> method creates a system for paging results. To initialize, the first parameter must be the table you want to use to start paging. The second parameter will list the amount of values that will be returned from the table as shown in the example below.</p>
<pre><code class="language-php">$users = new User();
$values = $users-&gt;pagination('your_table', 3);
</code></pre>
<p>To retrieve the table values from the database, you can use the <code>getRows()</code> method. And to use pagination, use the <code>getArrows()</code> method.</p>
<pre><code class="language-php">/** Returns table data */
$values-&gt;getRows();

/** Returns commands to advance or return */
$values-&gt;getArrows()
</code></pre>
<p>To use pagination with relationship in another table, in the third parameter pass an array containing the name of the table that has a relationship with the current table, the column name of the current table that has the foreign key and the column name of the primary key of the another table.</p>
<pre><code class="language-php">$users = new User();
$values = $users-&gt;pagination('your_table', 3, ['foreign_table', 'column_foreign_key', 'column_primary_key']);
</code></pre>
<h3 id="pagination-with-other-table-inner-join">Pagination with other table (INNER JOIN)</h3>
<p>If you want to use pagination with a table that has a foreign key, pass an array in the third parameter.</p>
<p>In the first index, insert the name of the table that is linked to the current table, in the second index the name of the column that contains the foreign key and in the third index the column name of the primary key of the table that references the current table</p>
<pre><code class="language-php">$values = (new User)-&gt;pagination('your_table', 3, ['foreign_table', 'column_foreign_key', 'column_primary_key'], &quot;status=true&quot;);
</code></pre>
<h3 id="where-clause">WHERE clause</h3>
<p>To use the WHERE clause, use the fourth parameter as shown below.</p>
<pre><code class="language-php">$values = (new User)-&gt;pagination('your_table', 3, null, &quot;status=true&quot;);
</code></pre>
<h3 id="wolf-template">Wolf Template</h3>
<p>Data pagination is widely used in project templates. You can integrate pagination into Wolf Template as follows:</p>
<pre><code class="language-php">$values = (new User)-&gt;pagination('your_table', 3);

return view('home', [
    'values' =&gt; $values
]);
</code></pre>
<p>In your template, retrieve the data like this:</p>
<pre><code class="language-html">&lt;table&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;Name&lt;/th&gt;
            &lt;th&gt;Age&lt;/th&gt;
            &lt;th&gt;Gender&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;

    &lt;tbody&gt;
        {% foreach ($values-&gt;getRows() as $result): %}
            &lt;tr&gt;
                &lt;td&gt;{{ $result['name'] }}&lt;/td&gt;
                &lt;td&gt;{{ $result['age'] }}&lt;/td&gt;
                &lt;td&gt;{{ $result['gender'] }}&lt;/td&gt;
            &lt;/tr&gt;
        {% endforeach; %}
    &lt;/tbody&gt;
&lt;/table&gt;

{{ $values-&gt;getArrows(); }}
</code></pre>
<p>The result will be as follows:</p>
<table style="margin-bottom: 20px;">
  <thead>
    <tr>
      <th>Name</th>
      <th>Age</th>
      <th>Gender</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Sam</td>
      <td>47</td>
      <td>Male</td>
    </tr>
    <tr>
      <td>Dean</td>
      <td>49</td>
      <td>Male</td>
    </tr>
    <tr>
      <td>Marry</td>
      <td>52</td>
      <td>Female</td>
    </tr>
  </tbody>
</table>

<p><span class="katrina-pag">&lt;&lt; 1</span> 2 <span class="katrina-pag">3 &gt;&gt;</span></p>
<p>To change the arrows (<code>&lt;&lt;</code> and <code>&gt;&gt;</code>), use the parameters of the <code>getArrows()</code> method. The result will be:</p>
<pre><code class="language-html">{{ $values-&gt;getArrows('First', 'Last'); }}
</code></pre>
<table style="margin-bottom: 20px;">
  <thead>
    <tr>
      <th>Name</th>
      <th>Age</th>
      <th>Gender</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Sam</td>
      <td>47</td>
      <td>Male</td>
    </tr>
    <tr>
      <td>Dean</td>
      <td>49</td>
      <td>Male</td>
    </tr>
    <tr>
      <td>Marry</td>
      <td>52</td>
      <td>Female</td>
    </tr>
  </tbody>
</table>

<p><span class="katrina-pag">First</span> 2 <span class="katrina-pag">3 Last</span></p>
<h3 id="custom-pagination">Custom Pagination</h3>
<p>The <code>pagination()</code> method uses a basic SELECT statement. If you need to use a much more complex SELECT, consider using the <code>customPagination()</code> method.</p>
<pre><code class="language-php">$values = (new User)-&gt;customPagination(&quot;SELECT created_at, order_status, idSession, SUM(idOrder) AS idOrder FROM `tb_order` 
GROUP BY created_at, order_status, idSession&quot;, 3);
</code></pre>
<h3 id="customizing-arrows-css">Customizing arrows CSS</h3>
<p>You can customize the look of the arrows through the classes <code>pagination_first_item</code>, <code>pagination_atual_item</code>, <code>pagination_others_itens</code> and <code>pagination_last_item</code>.</p>
<p>Below is a customization to serve as an example:</p>
<pre><code class="language-html">.pagination_atual_item {
    background-color: #B5B5B5;
    padding: 10px;
    margin: 5px;
    border-radius: 5px;
    margin-top: 30px;
    transition: 0.2s;
}

.pagination_first_item, .pagination_others_itens, .pagination_last_item {
    background-color: #4682B4;
    color: #FFF;
    padding: 10px;
    margin: 5px;
    border-radius: 5px;
    margin-top: 30px;
    transition: 0.2s;
    text-decoration: none;
}

.pagination_first_item:hover, .pagination_others_itens:hover, .pagination_last_item:hover {
    background-color: #0071E3;
    color: #FFF !important;
    transition: 0.2s;
}
</code></pre>
<h2 id="cache">Cache</h2>
<p>To enable Katrina ORM caching in Solital, you must change the <code>cache_database</code> variable to <code>true</code> in the <code>cache.yaml</code> file.</p>
<pre><code class="language-yaml"># Enable cache on Katrina ORM
cache_database: true
</code></pre>
<p>To configure caching in Solital, see the documentation <a href="https://solital.github.io/site/docs/4.x/cache/#cache-drive">here</a>.</p>
<p>If you are NOT using Katrina ORM together with Solital, you must configure the constants manually:</p>
<pre><code class="language-php">define('DB_CACHE', [
    'CACHE_TYPE' =&gt; 'memcached',
    'CACHE_HOST' =&gt; '127.0.0.1',
    'CACHE_PORT' =&gt; 11211,
    'CACHE_TTL' =&gt; 600
]);
</code></pre>
<p>Katrina ORM supports the following drivers</p>
<ul>
<li>Memcached</li>
<li>Memcache</li>
<li>APCu</li>
<li>Yac</li>
</ul>
<p>In your Model, you will need to enable caching. To do this, add the following property:</p>
<pre><code class="language-php">&lt;?php

namespace Solital\Components\Model;
use Katrina\Katrina;

class User extends Katrina
{
    /**
     * @var bool|null
     */
    protected ?bool $cache = true;
}
</code></pre>
<h2 id="multiple-connections">Multiple connections</h2>
<p>In specific cases it is necessary to use two different databases. Katrina ORM supports you to use a second database.</p>
<p>To do this, you must add the following variables to your <code>.env</code> file:</p>
<pre><code class="language-bash">DB_HOST_SECONDARY=localhost
DB_NAME_SECONDARY=second_database
DB_USER_SECONDARY=root
DB_PASS_SECONDARY=&quot;&quot;
SQLITE_DIR_SECONDARY=&quot;&quot;
</code></pre>
<p>If you are NOT using Solital, you must create the following constants:</p>
<pre><code class="language-php">define('DB_CONFIG_SECONDARY', [
    'HOST' =&gt; 'localhost',
    'DBNAME' =&gt; 'second_database',
    'USER' =&gt; 'root',
    'PASS' =&gt; '',
    'SQLITE_DIR' =&gt; ''
]);
</code></pre>
<p>So, to use the second connection to the other database, use the <code>connection</code> method:</p>
<pre><code class="language-php"># Main database
User::select()-&gt;get();

# Second database
User::connection('pgsql')::select()-&gt;get();
</code></pre>
<h2 id="types-of-data">Types of data</h2>
<p>Below is listed the attributes and data supported by Katrina ORM:</p>
<table class="table">
  <thead>
    <tr>
      <th scope="col">String data</th>
      <th scope="col">Numerical data</th>
      <th scope="col">Date and time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><span class="cmd-vinci">varchar()</span></td>
      <td><span class="cmd-vinci">tinyint()</span></td>
      <td><span class="cmd-vinci">date()</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">char()</span></td>
      <td><span class="cmd-vinci">smallint()</span></td>
      <td><span class="cmd-vinci">year()</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">tinytext()</span></td>
      <td><span class="cmd-vinci">mediumint()</span></td>
      <td><span class="cmd-vinci">time()</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">mediumtext()</span></td>
      <td><span class="cmd-vinci">bigint()</span></td>
      <td><span class="cmd-vinci">datetime()</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">longtext()</span></td>
      <td><span class="cmd-vinci">int()</span></td>
      <td><span class="cmd-vinci">timestamp()</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">text()</span></td>
      <td><span class="cmd-vinci">decimal()</span></td>
      <td><span class="cmd-vinci">-</span></td>
    </tr>
  </tbody>
</table>

<table class="table">
  <thead>
    <tr>
      <th scope="col">Attributes</th>
      <th scope="col">Boolean</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><span class="cmd-vinci">boolean()</span></td>
      <td><span class="cmd-vinci">default()</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">unique()</span></td>
      <td><span class="cmd-vinci">-</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">unsigned()</span></td>
      <td><span class="cmd-vinci">-</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">incremet() (MYSQL)</span></td>
      <td><span class="cmd-vinci">-</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">notNull()</span></td>
      <td><span class="cmd-vinci">-</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">primary()</span></td>
      <td><span class="cmd-vinci">-</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">after()</span></td>
      <td><span class="cmd-vinci">-</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">first()</span></td>
      <td><span class="cmd-vinci">-</span></td>
    </tr>
    <tr>
      <td><span class="cmd-vinci">serial() (POSTGRESQL)</span></td>
      <td><span class="cmd-vinci">-</span></td>
    </tr>
  </tbody>
</table>
                

                <hr />

                
                <h3>What to see next?</h3>

                <section aria-label="breadcrumb" class="mt-4">
                  <ol class="breadcrumb">
                    
                      <li class="breadcrumb-item"><a href="../dump/">&#8592; Dump</a></li>
                    
                    
                      <li class="breadcrumb-item"><a href="../deploy/">Deploy &#8594;</a></li>
                    
                  </ol>
                </section>
                

              </div>

              <hr>

              <div class="row text-center mt-3">
                <div class="col-md-12 col-sm-12 ml-2">
                  Built with <a href="https://www.mkdocs.org">MkDocs</a>.
                </div>
              </div>
            </div>

            <!--
              MkDocs version      : 1.5.3
              Docs Build Date UTC : 2024-05-17 10:10:26.018094+00:00
              -->

          </section>
        </div>
      </div>
    </div>
  </div>
</body>

</html>