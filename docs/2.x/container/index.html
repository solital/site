<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dependency Container - Solital Framework</title>
  <link rel="shortcut icon" href="../img/favicon.ico">

  <!-- <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css"> -->
  <link rel="stylesheet" href="../css/reset.css">
  <link rel="stylesheet" href="../css/bootstrap.css">
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/theme-2.css">
  <link rel="stylesheet" href="../css/styles/default.css">
  <link rel="stylesheet" href="../css/custom.css">
  <link rel="stylesheet" href="../css/code-1.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

  

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="../js/bootstrap.js"></script>
  <script src="../js/bootstrap.bundle.js"></script>
  <script src="../js/highlight.pack.js"></script>
  <script src="../js/nav.js"></script>
  <script src="../js/popper.min.js"></script>
  <script src="../js/scripts.js"></script>
  <script>hljs.highlightAll();</script>

  
  

  
  <script src="../search/main.js"></script>
  

  

</head>

<body>
  <div class="d-flex" id="wrapper">
    <!-- Sidebar -->
    <div class="border-right bg-menu" id="sidebar-wrapper">
      <div class="sidebar-heading">
        <a class="navbar-brand">
          <img class="d-inline-block align-top img-fluid logo-menu" src="../img/solital-logo-2-sm-trans-2.png">
        </a>
      </div>
      <div class="scroll">
        <ul class="list-group list-group-flush bg-menu">
          
          
  <a href=".." class="list-group-item list-group-item-action no-border bg-menu ">
    Starting
  </a>

          
          
<a class="list-group-item list-group-item-action no-border bg-menu " href="#Settings"
data-toggle="collapse" aria-expanded="false">
  Settings
</a>
<ul class="collapse list-unstyled" id="Settings">
    
    <a href="../installation/" class="subitem">
      <li>Installing</li>
    </a>
    
    <a href="../env/" class="subitem">
      <li>Environment variables</li>
    </a>
    
    <a href="../helpers/" class="subitem">
      <li>Helpers</li>
    </a>
    
</ul>

          
          
<a class="list-group-item list-group-item-action no-border bg-menu " href="#Routers"
data-toggle="collapse" aria-expanded="false">
  Routers
</a>
<ul class="collapse list-unstyled" id="Routers">
    
    <a href="../routes/" class="subitem">
      <li>Routes</li>
    </a>
    
    <a href="../events/" class="subitem">
      <li>Events</li>
    </a>
    
    <a href="../input/" class="subitem">
      <li>Input and params</li>
    </a>
    
</ul>

          
          
<a class="list-group-item list-group-item-action no-border bg-menu active-list " href="#Components"
data-toggle="collapse" aria-expanded="false">
  Components
</a>
<ul class="collapse list-unstyled" id="Components">
    
    <a href="../vinci/" class="subitem">
      <li>Vinci Console</li>
    </a>
    
    <a href="../cache/" class="subitem">
      <li>Cache</li>
    </a>
    
    <a href="./" class="subitem">
      <li>Dependency Container</li>
    </a>
    
    <a href="../http-client/" class="subitem">
      <li>HTTP Client</li>
    </a>
    
    <a href="../wolf/" class="subitem">
      <li>Wolf Template</li>
    </a>
    
</ul>

          
          
<a class="list-group-item list-group-item-action no-border bg-menu " href="#Resources"
data-toggle="collapse" aria-expanded="false">
  Resources
</a>
<ul class="collapse list-unstyled" id="Resources">
    
    <a href="../date/" class="subitem">
      <li>Date and time</li>
    </a>
    
    <a href="../filesystem/" class="subitem">
      <li>File System</li>
    </a>
    
    <a href="../json/" class="subitem">
      <li>JSON</li>
    </a>
    
    <a href="../log/" class="subitem">
      <li>Logger</li>
    </a>
    
    <a href="../mail/" class="subitem">
      <li>Mail</li>
    </a>
    
    <a href="../session-cookie/" class="subitem">
      <li>Session and Cookie</li>
    </a>
    
    <a href="../validate/" class="subitem">
      <li>Validation</li>
    </a>
    
    <a href="../messages/" class="subitem">
      <li>View Alerts</li>
    </a>
    
</ul>

          
          
<a class="list-group-item list-group-item-action no-border bg-menu " href="#Security"
data-toggle="collapse" aria-expanded="false">
  Security
</a>
<ul class="collapse list-unstyled" id="Security">
    
    <a href="../auth/" class="subitem">
      <li>Authenticate</li>
    </a>
    
    <a href="../crypt/" class="subitem">
      <li>Cryptography</li>
    </a>
    
    <a href="../csrf/" class="subitem">
      <li>CSRF Protection</li>
    </a>
    
    <a href="../forgot/" class="subitem">
      <li>Recovery Password</li>
    </a>
    
</ul>

          
          
<a class="list-group-item list-group-item-action no-border bg-menu " href="#Database"
data-toggle="collapse" aria-expanded="false">
  Database
</a>
<ul class="collapse list-unstyled" id="Database">
    
    <a href="../sql/" class="subitem">
      <li>Builder SQL</li>
    </a>
    
    <a href="../katrina/" class="subitem">
      <li>Katrina ORM</li>
    </a>
    
</ul>

          
          
  <a href="../deploy/" class="list-group-item list-group-item-action no-border bg-menu ">
    Deploy
  </a>

          
        </ul>
      </div>
      <!-- <hr>
      <button class="btn btn-1 dropdown-toggle ml-2" type="button" id="dropdownMenuButton" data-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false">
        Vers√£o do Solital
      </button>
      <div class="dropdown-menu bg-1" aria-labelledby="dropdownMenuButton">
        <a class="dropdown-item text-white" href="#">1.0</a>
      </div> -->
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">
      <nav class="navbar navbar-expand-lg navbar-light w-100" style="margin-left: -1px;">
        <button class="btn btn-1" id="menu-toggle">
          <i class="fas fa-arrows-alt-h p-1"></i>
        </button>

        <button class="navbar-toggler navbar-icon" type="button" data-toggle="collapse"
          data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
          aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="http://solitalframework.com">Home</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Doc Version
              </a>
              <div class="dropdown-menu bg-1" aria-labelledby="navbarDropdown" style="width: 10% !important;">
                <a class="dropdown-item txt-8" href="https://solital.github.io/docs-v1/">1.x</a>
              </div>
            </li>
            <li class="nav-item">
              <div role="search">
                <form action="../search.html" method="get">
                  <input type="search" name="q" placeholder="&#xf002; Search..." class="input-search"
                    autocomplete="off" />
                </form>
              </div>
            </li>
          </ul>
        </div>
      </nav>

      <section class="container-fluid section">
        <div class="row">
          <div class="col-md-12 w-100">
            <h1 class="mt-4 font-weight-normal">Dependency Container</h1>
          </div>
  
          <div class="col-md-12 mt-3">
            
  
            <ul class="ml-5 mb-5">
              
              <li><a href="#introduction">Introduction</a></li>
              
              
              <li><a href="#how-to-use">How to use</a></li>
              
              
              <li><a href="#return-a-container">Return a container</a></li>
              
              
              <li><a href="#using-arguments-in-the-constructor">Using arguments in the constructor</a></li>
              
              
              <li><a href="#example">Example</a></li>
              
              
            </ul>
  
            
            <h2 id="introduction">Introduction</h2>
<p>Injecting dependencies can become a tedious task when many classes are involved. Before injecting a dependency it needs to be instantiated. So, we don't just take care of the "injection", we also need to have the knowledge of what objects it needs to work.</p>
<p>A dependency injection container (DI Container) manages and automates instantiations. We tell him how an object should be created (this is the part that touches us, our knowledge about it) and then whenever we need it, we just need to use the container to obtain it. </p>
<p>Solital implements the PSR-11, meaning you can easily create dependency containers. By default, if your controller extends from <code>Controller</code>, you only need to use <code>$this-&gt;container-&gt;get()</code> and <code>$this-&gt;container-&gt;set()</code>. Otherwise, it is necessary to make the instance of the <code>Container</code> class. </p>
<pre><code class="language-php">use Solital\Core\Course\Container\Container;

$container = new Container();
</code></pre>
<h2 id="how-to-use">How to use</h2>
<p>The <code>set()</code> method sets a dependency function for an identifier that returns the dependency. Subsequent calls to the identifier return the first returned value of the function. <code>$id</code> is the identifier of the entry to look for, <code>$function</code> is the function whose return value will be attached to the identifier on subsequent <code>get()</code> calls.</p>
<pre><code class="language-php">$this-&gt;container-&gt;set($id, $function);
</code></pre>
<p>The example below shows exactly how you should create your dependency container. </p>
<pre><code class="language-php"># The `UserModel` instance is just an example

$this-&gt;container-&gt;set('user', function() {
    return new UserModel();
});
</code></pre>
<h2 id="return-a-container">Return a container</h2>
<p>To return a container, use the <code>get()</code> method by passing the dependency identifier as a parameter. </p>
<pre><code class="language-php">$dep = $this-&gt;container-&gt;get('user');

# The `run` method is just an example of the fictional `UserModel` class. 
$res = $dep-&gt;run();
pre($res);
</code></pre>
<p>You can check if a container exists using the <code>has()</code> method. Returns true if the container can return an entry for the given identifier. Otherwise, it returns false.</p>
<pre><code class="language-php">$this-&gt;container-&gt;get('user');
$dep = $this-&gt;container-&gt;has('user');

/** Return bool */
pre($dep);
</code></pre>
<p><code>has($id)</code> returning true does not mean that <code>get($id)</code> will not throw an exception. However, this means that <code>get($id)</code> will not throw a <code>NotFoundException</code>. </p>
<h2 id="using-arguments-in-the-constructor">Using arguments in the constructor</h2>
<p>If you need to use any arguments in your class's constructor, you can use the third parameter of the <code>set()</code> method. </p>
<pre><code class="language-php"># The `UserModel` instance is just an example

$this-&gt;container-&gt;set('user', function($args) {
    return new UserModel($args);
}, 'Brenno Duarte');
</code></pre>
<p>You can use arguments as an array:</p>
<pre><code class="language-php"># The `UserModel` instance is just an example

$array_args = ['arg1', 'arg2', 'arg3'];

$this-&gt;container-&gt;set('user', function($args) {
    return new UserModel($args);
}, $array_args);
</code></pre>
<h2 id="example">Example</h2>
<p>Below is an example of how the dependency container should be used: </p>
<pre><code class="language-php">&lt;?php

namespace Solital\Components\Controller;

use Solital\Components\Controller\Controller;
use Solital\Components\Model\UserModel;
use Solital\Components\Model\ContactModel;

class UserController extends Controller
{
    /**
     * Construct
     */
    public function __construct()
    {
        $this-&gt;container-&gt;set(&quot;user&quot;, function() {
            return new UserModel();
        });
    }

    /**
     * @return void
     */
    public function call1(): void
    {
        $dep = $this-&gt;container-&gt;get('user');
        $dep-&gt;run();
    }

    /**
     * @return void
     */
    public function call2()
    {
        $dep = $this-&gt;container-&gt;get('user');
        $dep-&gt;run();
    }
}
</code></pre>
            
  
            <hr />
  
            <h3>What to see next?</h3>
  
            <section class="container">
              
            
              <div class="row mt-3">
                <nav class="col-md-6 col-sm-12">
                  <ul class="form-inline next">
                    
                    <li class="next-li"><a href="../cache/"
                        title="Cache">&#8592; Cache</a></li>
                    
                    
                    
                    <li class="next-li"><a href="../http-client/" title="HTTP Client" />HTTP Client
                      &#8594;</a></li>
                    
                  </ul>
                </nav>
              </div>
              
              
            </section>
          </div>
  
          <hr>
  
          <div class="row text-center mt-3">
            <div class="col-md-12 ml-2">
              Built with <a href="https://www.mkdocs.org">MkDocs</a>.
            </div>
          </div>
        </div>

        <!--
          MkDocs version      : 1.1.2
          Docs Build Date UTC : 2021-07-20 11:35:57.172004+00:00
          -->

      </section>
    </div>
    <!-- /#page-content-wrapper -->

  </div>
  <!-- /#wrapper -->

</body>

</html>